<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>5 min Dribble Workout</title>
  <style>
    body {
      font-family: sans-serif;
      background: #111;
      color: #fff;
      padding: 2rem;
    }
    .exercise {
      margin-bottom: 2rem;
      padding: 1rem;
      border: 1px solid #444;
      border-radius: 8px;
      transition: background 0.3s;
    }
    .exercise.done {
      text-decoration: line-through;
      opacity: 0.6;
    }
    .timer {
      font-size: 1.5rem;
      margin-top: 0.5rem;
    }
    .reps {
  margin-top: 0.3rem;
  cursor: pointer;
}
    .rep-count {
  font-size: 1.8rem;
  font-weight: bold;
  color: #0ff;
}

.note {
  font-size: 1rem;
  margin-top: 0.5rem;
  color: #ccc;
}

.sets {
  margin-top: 0.5rem;
  font-size: 1.5rem;
}

.set {
  margin-right: 0.4rem;
  cursor: pointer;
  user-select: none;
}
.set.checked {
  color: #0f0;
}
    #playBtn {
      font-size: 1.5rem;
      padding: 1rem 2rem;
      background: #28a745;
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      margin-bottom: 2rem;
    }
    #overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 6rem;
      color: #0f0;
      display: none;
      z-index: 10;
    }
  </style>
</head>
<body>
  <button id="playBtn">Play</button>
  <div id="exercises"></div>
  <div id="overlay"></div>

  <script>
    const exercises = [
      { text: 'Pound R - Cambiando peso', type: 'time', duration: 2 },
      { text: 'Pound L - Cambiando peso', type: 'time', duration: 2 },
      { text: 'Cross - Cambiando peso', type: 'time', duration: 2 },
      { text: 'Pound + Joke cross', type: 'time', duration: 2 },
      { text: 'Joke cross', type: 'time', duration: 2 },
      { text: 'Pound + BTL + xDetrás', type: 'reps', reps: 10 },
      { text: 'BTL Split', type: 'reps', reps: 20, note: 'Neutro+pound, split+BTL, neutro+pound…' },
      { text: 'Avanzar: Pound + Cross', type: 'reps', reps: 10, sets: 4 },
      { text: 'Avanzar: Pound + BTL', type: 'reps', reps: 10, sets: 4 },
      { text: 'Avanzar: (Pound + Cross) + (Pound + BTL)', type: 'reps', reps: 10, sets: 4 },
    ];

    const exContainer = document.getElementById('exercises');
    const overlay = document.getElementById('overlay');

    exercises.forEach((ex, i) => {
      const div = document.createElement('div');
      div.classList.add('exercise');
      div.dataset.index = i;
     div.innerHTML = `
  <div style="display: flex; justify-content: space-between; align-items: center;">
    <strong>${ex.text}</strong>
    ${ex.type === 'reps' ? `<span class="rep-count">x${ex.reps}</span>` : ''}
  </div>
  ${ex.type === 'time'
    ? `<div class="timer" contenteditable="true">${ex.duration}</div>`
    : `
      <div class="note" contenteditable="true">${ex.note || ''}</div>
      ${ex.sets ? `<div class="sets">${[...Array(ex.sets)].map(() => '<span class="set">◯</span>').join(' ')}</div>` : ''}
    `
  }
`;
      if (ex.type === 'reps') {
        div.addEventListener('click', () => div.classList.toggle('done'));
      }
      exContainer.appendChild(div);
      const setEls = div.querySelectorAll('.set');
setEls.forEach(set => {
  set.addEventListener('click', () => {
    set.classList.toggle('checked');
  });
});
    });

    const beep = () => {
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      const osc = ctx.createOscillator();
      osc.type = 'square';
      osc.frequency.setValueAtTime(1000, ctx.currentTime);
      osc.connect(ctx.destination);
      osc.start();
      osc.stop(ctx.currentTime + 0.2);
    };

    const sleep = ms => new Promise(res => setTimeout(res, ms));

    document.getElementById('playBtn').addEventListener('click', async () => {
      const items = document.querySelectorAll('.exercise');
      for (let i = 0; i < items.length; i++) {
        const item = items[i];
        const type = exercises[i].type;

        if (type === 'time') {
          let timeEl = item.querySelector('.timer');
          let seconds = parseInt(timeEl.innerText);

          while (seconds > 0) {
            timeEl.innerText = seconds--;
            await sleep(1000);
          }

          beep();
          item.style.background = 'green';

          // 3 sec countdown overlay
          for (let j = 3; j > 0; j--) {
            overlay.innerText = j;
            overlay.style.display = 'flex';
            await sleep(1000);
          }
          overlay.style.display = 'none';
          item.style.background = '';
        } else {
          // Wait for user click to mark
          continue;
        }
      }
    });
  </script>
</body>
</html>
